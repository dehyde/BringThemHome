<!DOCTYPE html>
<html>
<head>
    <title>D3-Sankey Test</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/d3-sankey@0.12/dist/d3-sankey.min.js"></script>
</head>
<body>
    <div id="test-result"></div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                const result = document.getElementById('test-result');
                
                if (typeof d3 === 'undefined') {
                    result.innerHTML = '<p style="color: red;">❌ D3.js not loaded</p>';
                } else if (typeof d3.sankey === 'undefined') {
                    result.innerHTML = `
                        <p style="color: orange;">⚠️ D3.js loaded but d3-sankey not available</p>
                        <p>D3 version: ${d3.version}</p>
                        <p>Available d3 modules: ${Object.keys(d3).slice(0, 10).join(', ')}...</p>
                    `;
                } else {
                    result.innerHTML = `
                        <p style="color: green;">✅ Both D3.js and d3-sankey loaded successfully!</p>
                        <p>D3 version: ${d3.version}</p>
                        <p>d3-sankey available: ${typeof d3.sankey}</p>
                    `;
                    
                    // Test basic sankey functionality
                    try {
                        const sankey = d3.sankey();
                        result.innerHTML += '<p style="color: green;">✅ d3.sankey() constructor works</p>';
                    } catch (error) {
                        result.innerHTML += `<p style="color: red;">❌ d3.sankey() error: ${error.message}</p>`;
                    }
                }
            }, 200);
        });
    </script>
</body>
</html>